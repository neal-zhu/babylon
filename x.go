package main

import (
	"encoding/hex"
	"fmt"

	"github.com/babylonlabs-io/babylon/x/btcstaking/types"
	bstypes "github.com/babylonlabs-io/babylon/x/btcstaking/types"
	"github.com/btcsuite/btcd/chaincfg"
)

func main() {
	str := "0a2a62626e316a72376b376c3436393033677970787a61336c7a79793778736c66307561673471747974326e12450802124120f370655c45e9d77c2bc0e01ab6fc8795c8e0aa518a6e376c1e58612eac2ee595549a937eed037850dd5ec43b334f9e513e0402cdb5d678401fabea8dfd2dfe791a20d6ff0e95cfb7fe71762b8185decc04ba9b2996ca550a520578c5a0ed75db16962220c4641cf0f5c549e2cd36aad731deb1b1199a464be472a1d5cc4dada01079d2452880f40330d086033a9f0202000000000101bf1ae1362bc9b51a327bf659e8fe77ea44cb59bd30b755aa854093614a1b643d0200000000000000000350c3000000000000225120c65b62b177a4c9783d64c5c62ca6e7cdf12899254a61876c34b0a1bc7f3813b40000000000000000496a476262743400002435bdbe7d1d057cb8fc8c662c4e47783d05c99e7ce03f77448eb77d69b38bc4641cf0f5c549e2cd36aad731deb1b1199a464be472a1d5cc4dada01079d245fa00e78a040000000000225120002435bdbe7d1d057cb8fc8c662c4e47783d05c99e7ce03f77448eb77d69b38b014067e165db99e45bcb0b85a85fa55157efb1d0ca75efeceb9220d670e23a2bfb4176dc127da0295483f599263061c8f9e5738b3dfc9640389a4b5b4e308e6e87dadc5d03004281030a24080512209e9a5c688e23e5258f619d92b2b132507c0fa3f4e8087097210c53ae7800000012d80238586b774b4f38737a356a47644e4f4d6578396330705a5a3348395953745969464b326f6b54444a2b364d69397153465652437a7343436557466b64377a59736263776a733243446268314f332b347035413153395a4d42734b324a68703467716f4e7662574e417a504777374a6c353652303659456e79455755556c424b69396377324f2f624b4278474c643956434d31522b506d63684b3279466f424b414d32424e4a5868456274302b4e423766635a74786f393669474739546e6e7156506d49417541386e45325234745474493653635743717473556a4b36424e523069766339547178777833475a427a3478355a59352f54794c374d564b6c68533630635352666578526232616170536d3354556f657833776e5449417264684365682b583630436c6150564f634161476e6f34676b4b3468342f4e4f445236336a796a39655338744777473261695a662b2f51724575673d3d4aa105020000000001019e75a598b1f1fd46908c7ca5aebec3e2c6b67cb72006cf7ac5d438c206a4c9d20000000000ffffffff0288130000000000001976a914010101010101010101010101010101010101010188ace0ab000000000000225120abb9b028367a17f41c2b91bbb9eafc4bc96c443d6fbe78278058c8db2455f04b0340fe0e8280fddd6a3772a4f90cc22fc84ed287c85b7a8f9645b19dc1bf091fdc7b4a7abfed08e01d0eddb3eed8a287731ed561bbb2c18e2fabf7116b71ef1f22eefd780120002435bdbe7d1d057cb8fc8c662c4e47783d05c99e7ce03f77448eb77d69b38bad20c4641cf0f5c549e2cd36aad731deb1b1199a464be472a1d5cc4dada01079d245ad200aee0509b16db71c999238a4827db945526859b13c95487ab46725357c9a9f25ac20113c3a32a9d320b72190a04a020a0db3976ef36972673258e9a38a364f3dc3b0ba2017921cf156ccb4e73d428f996ed11b245313e37e27c978ac4d2cc21eca4672e4ba203bb93dfc8b61887d771f3630e9a63e97cbafcfcc78556a474df83a31a0ef899cba2040afaf47c4ffa56de86410d8e47baa2bb6f04b604f4ea24323737ddc3fe092dfba2079a71ffd71c503ef2e2f91bccfc8fcda7946f4653cef0d9f3dde20795ef3b9f0ba20d21faf78c6751a0d38e6bd8028b907ff07e9a869a43fc837d6b3f8dff6119a36ba20f5199efae3f28bb82476163a7e458c7ad445d9bffb0682d10d3bdb2cb41f8e8eba20fa9d882d45f4060bdb8042183828cd87544f1ea997380e586cab77d5fd698737ba569c61c150929b74c1a04954b78b4b6035e97a5e078a5a0f28ec96d547bfee9ace803ac0695a0e05de256e39d68c5f66df46813819833a6fbf9c097508077f1e845b07466199d017623fe881b2931ede3511e95996807307f3d6d7dd70c80290a8ad6a3a000000005240fe0e8280fddd6a3772a4f90cc22fc84ed287c85b7a8f9645b19dc1bf091fdc7b4a7abfed08e01d0eddb3eed8a287731ed561bbb2c18e2fabf7116b71ef1f22ee58f00762dd04020000000001019e75a598b1f1fd46908c7ca5aebec3e2c6b67cb72006cf7ac5d438c206a4c9d20000000000ffffffff01c8af0000000000002251207a09967190768731b56f99920f5ecc5c3271b570a74cb45709178f36fd4bfcbb03407aa1583ba6b95939b0f0ea920d6f41502249a8764ec3316d339f72ebaaececf6410d9b0f224444f808e19c200b7ee12f4f284c16f76636a53475399a9f1c9e76fd560120002435bdbe7d1d057cb8fc8c662c4e47783d05c99e7ce03f77448eb77d69b38bad200aee0509b16db71c999238a4827db945526859b13c95487ab46725357c9a9f25ac20113c3a32a9d320b72190a04a020a0db3976ef36972673258e9a38a364f3dc3b0ba2017921cf156ccb4e73d428f996ed11b245313e37e27c978ac4d2cc21eca4672e4ba203bb93dfc8b61887d771f3630e9a63e97cbafcfcc78556a474df83a31a0ef899cba2040afaf47c4ffa56de86410d8e47baa2bb6f04b604f4ea24323737ddc3fe092dfba2079a71ffd71c503ef2e2f91bccfc8fcda7946f4653cef0d9f3dde20795ef3b9f0ba20d21faf78c6751a0d38e6bd8028b907ff07e9a869a43fc837d6b3f8dff6119a36ba20f5199efae3f28bb82476163a7e458c7ad445d9bffb0682d10d3bdb2cb41f8e8eba20fa9d882d45f4060bdb8042183828cd87544f1ea997380e586cab77d5fd698737ba569c61c150929b74c1a04954b78b4b6035e97a5e078a5a0f28ec96d547bfee9ace803ac0695a0e05de256e39d68c5f66df46813819833a6fbf9c097508077f1e845b07466199d017623fe881b2931ede3511e95996807307f3d6d7dd70c80290a8ad6a3a0000000068c8df02728105020000000001017a374f25011433a765ee66c5c28af846b31c8ebfe643de6aa9b16aeb8576ed180000000000ffffffff0294110000000000001976a914010101010101010101010101010101010101010188ac4c9a000000000000225120abb9b028367a17f41c2b91bbb9eafc4bc96c443d6fbe78278058c8db2455f04b0340f80ca154302e35f994cb7283cd5f3ad0e02b4889cb43f9afa087255dfa5616106ca3e8d40eeb8d996f4ddb0840aac9e801c4cf272b83e473951653b5aee4b721fd780120002435bdbe7d1d057cb8fc8c662c4e47783d05c99e7ce03f77448eb77d69b38bad20c4641cf0f5c549e2cd36aad731deb1b1199a464be472a1d5cc4dada01079d245ad200aee0509b16db71c999238a4827db945526859b13c95487ab46725357c9a9f25ac20113c3a32a9d320b72190a04a020a0db3976ef36972673258e9a38a364f3dc3b0ba2017921cf156ccb4e73d428f996ed11b245313e37e27c978ac4d2cc21eca4672e4ba203bb93dfc8b61887d771f3630e9a63e97cbafcfcc78556a474df83a31a0ef899cba2040afaf47c4ffa56de86410d8e47baa2bb6f04b604f4ea24323737ddc3fe092dfba2079a71ffd71c503ef2e2f91bccfc8fcda7946f4653cef0d9f3dde20795ef3b9f0ba20d21faf78c6751a0d38e6bd8028b907ff07e9a869a43fc837d6b3f8dff6119a36ba20f5199efae3f28bb82476163a7e458c7ad445d9bffb0682d10d3bdb2cb41f8e8eba20fa9d882d45f4060bdb8042183828cd87544f1ea997380e586cab77d5fd698737ba569c41c150929b74c1a04954b78b4b6035e97a5e078a5a0f28ec96d547bfee9ace803ac06199d017623fe881b2931ede3511e95996807307f3d6d7dd70c80290a8ad6a3a000000007a40f80ca154302e35f994cb7283cd5f3ad0e02b4889cb43f9afa087255dfa5616106ca3e8d40eeb8d996f4ddb0840aac9e801c4cf272b83e473951653b5aee4b721"
	data, err := hex.DecodeString(str)
	if err != nil {
		fmt.Println("Error decoding hex:", err)
		return
	}
	var msg bstypes.MsgCreateBTCDelegation
	err = msg.Unmarshal(data)
	if err != nil {
		fmt.Println("Error unmarshalling:", err)
		return
	}
	parsedMsg, err := types.ParseCreateDelegationMessage(&msg)
	if err != nil {
		fmt.Println("Error parsing:", err)
		return
	}

	if err := parsedMsg.ParsedPop.Verify(parsedMsg.StakerAddress, parsedMsg.StakerPK.BIP340PubKey, &chaincfg.SigNetParams); err != nil {
		fmt.Println("Error verifying:", err)
		return
	}
	fmt.Println("Verified")
}
