package main

import (
	"encoding/hex"
	"fmt"
	"strings"

	"github.com/babylonlabs-io/babylon/x/btcstaking/types"
	bstypes "github.com/babylonlabs-io/babylon/x/btcstaking/types"
	"github.com/btcsuite/btcd/chaincfg"
)

func main() {
	for _, sigHex := range []string{
		"0x0a2a62626e316a72376b376c3436393033677970787a61336c7a79793778736c66307561673471747974326e1245080212412047f5210833cfb12ee7dfa8926cf45a8b153f8937c28657d6e0d866e64c508e124cb9d7f7985344a67c76fb8cdbe55af49409c35927b88369fec4e3b25487bcf31a20002435bdbe7d1d057cb8fc8c662c4e47783d05c99e7ce03f77448eb77d69b38b2220c4641cf0f5c549e2cd36aad731deb1b1199a464be472a1d5cc4dada01079d2452880f40330d086033a9f0202000000000101bf1ae1362bc9b51a327bf659e8fe77ea44cb59bd30b755aa854093614a1b643d0200000000000000000350c3000000000000225120c65b62b177a4c9783d64c5c62ca6e7cdf12899254a61876c34b0a1bc7f3813b40000000000000000496a476262743400002435bdbe7d1d057cb8fc8c662c4e47783d05c99e7ce03f77448eb77d69b38bc4641cf0f5c549e2cd36aad731deb1b1199a464be472a1d5cc4dada01079d245fa00e78a040000000000225120002435bdbe7d1d057cb8fc8c662c4e47783d05c99e7ce03f77448eb77d69b38b014067e165db99e45bcb0b85a85fa55157efb1d0ca75efeceb9220d670e23a2bfb4176dc127da0295483f599263061c8f9e5738b3dfc9640389a4b5b4e308e6e87dadc5d03004281030a24080512209e9a5c688e23e5258f619d92b2b132507c0fa3f4e8087097210c53ae7800000012d80238586b774b4f38737a356a47644e4f4d6578396330705a5a3348395953745969464b326f6b54444a2b364d69397153465652437a7343436557466b64377a59736263776a733243446268314f332b347035413153395a4d42734b324a68703467716f4e7662574e417a504777374a6c353652303659456e79455755556c424b69396377324f2f624b4278474c643956434d31522b506d63684b3279466f424b414d32424e4a5868456274302b4e423766635a74786f393669474739546e6e7156506d49417541386e45325234745474493653635743717473556a4b36424e523069766339547178777833475a427a3478355a59352f54794c374d564b6c68533630635352666578526232616170536d3354556f657833776e5449417264684365682b583630436c6150564f634161476e6f34676b4b3468342f4e4f445236336a796a39655338744777473261695a662b2f51724575673d3d4aa105020000000001019e75a598b1f1fd46908c7ca5aebec3e2c6b67cb72006cf7ac5d438c206a4c9d20000000000ffffffff0288130000000000001976a914010101010101010101010101010101010101010188ace0ab000000000000225120abb9b028367a17f41c2b91bbb9eafc4bc96c443d6fbe78278058c8db2455f04b03400edbfeeaaa4838de62d4bb7e93012c7df88e0552fad6aa2a391581ee98b064c640d3e9138d6df2691119bbd8a01289480fb31d99234ceda755ffdbd4f81d57a3fd780120002435bdbe7d1d057cb8fc8c662c4e47783d05c99e7ce03f77448eb77d69b38bad20c4641cf0f5c549e2cd36aad731deb1b1199a464be472a1d5cc4dada01079d245ad200aee0509b16db71c999238a4827db945526859b13c95487ab46725357c9a9f25ac20113c3a32a9d320b72190a04a020a0db3976ef36972673258e9a38a364f3dc3b0ba2017921cf156ccb4e73d428f996ed11b245313e37e27c978ac4d2cc21eca4672e4ba203bb93dfc8b61887d771f3630e9a63e97cbafcfcc78556a474df83a31a0ef899cba2040afaf47c4ffa56de86410d8e47baa2bb6f04b604f4ea24323737ddc3fe092dfba2079a71ffd71c503ef2e2f91bccfc8fcda7946f4653cef0d9f3dde20795ef3b9f0ba20d21faf78c6751a0d38e6bd8028b907ff07e9a869a43fc837d6b3f8dff6119a36ba20f5199efae3f28bb82476163a7e458c7ad445d9bffb0682d10d3bdb2cb41f8e8eba20fa9d882d45f4060bdb8042183828cd87544f1ea997380e586cab77d5fd698737ba569c61c150929b74c1a04954b78b4b6035e97a5e078a5a0f28ec96d547bfee9ace803ac0695a0e05de256e39d68c5f66df46813819833a6fbf9c097508077f1e845b07466199d017623fe881b2931ede3511e95996807307f3d6d7dd70c80290a8ad6a3a0000000052400edbfeeaaa4838de62d4bb7e93012c7df88e0552fad6aa2a391581ee98b064c640d3e9138d6df2691119bbd8a01289480fb31d99234ceda755ffdbd4f81d57a358f00762dd04020000000001019e75a598b1f1fd46908c7ca5aebec3e2c6b67cb72006cf7ac5d438c206a4c9d20000000000ffffffff01c8af0000000000002251207a09967190768731b56f99920f5ecc5c3271b570a74cb45709178f36fd4bfcbb03402adbb9727549075f88eb0b72673e7d2ea5f2dbc717170167a2791d0a97f72824d3be3732521040e72680cedad94a37bb66f1c8f2fc6ddb2d23a3aef09d5b043efd560120002435bdbe7d1d057cb8fc8c662c4e47783d05c99e7ce03f77448eb77d69b38bad200aee0509b16db71c999238a4827db945526859b13c95487ab46725357c9a9f25ac20113c3a32a9d320b72190a04a020a0db3976ef36972673258e9a38a364f3dc3b0ba2017921cf156ccb4e73d428f996ed11b245313e37e27c978ac4d2cc21eca4672e4ba203bb93dfc8b61887d771f3630e9a63e97cbafcfcc78556a474df83a31a0ef899cba2040afaf47c4ffa56de86410d8e47baa2bb6f04b604f4ea24323737ddc3fe092dfba2079a71ffd71c503ef2e2f91bccfc8fcda7946f4653cef0d9f3dde20795ef3b9f0ba20d21faf78c6751a0d38e6bd8028b907ff07e9a869a43fc837d6b3f8dff6119a36ba20f5199efae3f28bb82476163a7e458c7ad445d9bffb0682d10d3bdb2cb41f8e8eba20fa9d882d45f4060bdb8042183828cd87544f1ea997380e586cab77d5fd698737ba569c61c150929b74c1a04954b78b4b6035e97a5e078a5a0f28ec96d547bfee9ace803ac0695a0e05de256e39d68c5f66df46813819833a6fbf9c097508077f1e845b07466199d017623fe881b2931ede3511e95996807307f3d6d7dd70c80290a8ad6a3a0000000068c8df02728105020000000001017a374f25011433a765ee66c5c28af846b31c8ebfe643de6aa9b16aeb8576ed180000000000ffffffff0294110000000000001976a914010101010101010101010101010101010101010188ac4c9a000000000000225120abb9b028367a17f41c2b91bbb9eafc4bc96c443d6fbe78278058c8db2455f04b03402c8ed1bd6fe75358679d13c358cc4f63e85b1db8ecf3ccb67d464048166d0bac0b492fe541aafa550de396c5261917a0e6e25f242f3382362483f11869e5e25dfd780120002435bdbe7d1d057cb8fc8c662c4e47783d05c99e7ce03f77448eb77d69b38bad20c4641cf0f5c549e2cd36aad731deb1b1199a464be472a1d5cc4dada01079d245ad200aee0509b16db71c999238a4827db945526859b13c95487ab46725357c9a9f25ac20113c3a32a9d320b72190a04a020a0db3976ef36972673258e9a38a364f3dc3b0ba2017921cf156ccb4e73d428f996ed11b245313e37e27c978ac4d2cc21eca4672e4ba203bb93dfc8b61887d771f3630e9a63e97cbafcfcc78556a474df83a31a0ef899cba2040afaf47c4ffa56de86410d8e47baa2bb6f04b604f4ea24323737ddc3fe092dfba2079a71ffd71c503ef2e2f91bccfc8fcda7946f4653cef0d9f3dde20795ef3b9f0ba20d21faf78c6751a0d38e6bd8028b907ff07e9a869a43fc837d6b3f8dff6119a36ba20f5199efae3f28bb82476163a7e458c7ad445d9bffb0682d10d3bdb2cb41f8e8eba20fa9d882d45f4060bdb8042183828cd87544f1ea997380e586cab77d5fd698737ba569c41c150929b74c1a04954b78b4b6035e97a5e078a5a0f28ec96d547bfee9ace803ac06199d017623fe881b2931ede3511e95996807307f3d6d7dd70c80290a8ad6a3a000000007a402c8ed1bd6fe75358679d13c358cc4f63e85b1db8ecf3ccb67d464048166d0bac0b492fe541aafa550de396c5261917a0e6e25f242f3382362483f11869e5e25d",
	} {
		sigHex = strings.ReplaceAll(sigHex, "0x", "")
		data, err := hex.DecodeString(sigHex)
		if err != nil {
			fmt.Println("Error decoding hex:", err)
			return
		}
		var msg bstypes.MsgCreateBTCDelegation
		err = msg.Unmarshal(data)
		if err != nil {
			fmt.Println("Error unmarshalling:", err)
			return
		}
		parsedMsg, err := types.ParseCreateDelegationMessage(&msg)
		if err != nil {
			fmt.Println("Error parsing:", err)
			return
		}

		if err := parsedMsg.ParsedPop.Verify(parsedMsg.StakerAddress, parsedMsg.StakerPK.BIP340PubKey, &chaincfg.SigNetParams); err != nil {
			fmt.Println("Error verifying:", err)
			continue
		}
		fmt.Println("Verified")
	}
}
